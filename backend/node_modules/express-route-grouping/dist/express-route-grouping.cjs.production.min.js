"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("express"),r=(e=require("pluralize"))&&"object"==typeof e&&"default"in e?e.default:e,o={index:{method:"get",suffix:!1},find:{method:"get",suffix:!0},create:{method:"post",suffix:!1},update:{method:"put",suffix:!0},patch:{method:"patch",suffix:!0},delete:{method:"delete",suffix:!0}};exports.default=function(){function e(r,i){var a=this;void 0===r&&(r="/"),void 0===i&&(i=t.Router()),this.group=function(t,r){void 0===t&&(t="");var o=new e(a.head+a.sanitize(t),a.router);a.proxyRouter=a.createProxy(a.router,o),r(a.proxyRouter)},this.resource=function(e){if(!e)throw new Error("Resource handlers are required!");var t=e.handlers,r=void 0===t?{}:t,i=e.beforeHandlers,n=void 0===i?[]:i,u=e.afterHandlers,s=void 0===u?[]:u;Object.keys(o).forEach((function(e){var t=o[e],i=a.router[t.method],u=a.to(t.suffix?a.getPlaceholder():"/"),f=r[e];f&&i.bind(a.router).apply(void 0,[u].concat(n,Array.isArray(f)?f:[f],s))}))},this.export=function(){return a.router},this.to=function(e){return void 0===e&&(e="/"),a.head+a.sanitize(e)},this.head=r,this.router=i}var i=e.prototype;return i.sanitize=function(e){if("/"===e)return"";var t=e.replace(/^(\/+)(.)/,"$2").replace(/(.)(\/+)$/,"$1");return"/"!==this.head&&(t=t.padStart(t.length+1,"/")),t},i.toCamelCase=function(e){if(""===e)return e;var t=e.replace(/[^A-Za-z0-9]/g," ").replace(/\s+/g," ").split(/[-_\s]/).map((function(e){return e[0].toLocaleUpperCase()+e.substr(1)})).join("");return t[0].toLocaleLowerCase()+t.substr(1)},i.callRouter=function(e){var t=this;return"function"==typeof e?function(r){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];e.call.apply(e,[t.router,t.to(r)].concat(i))}:this.router[e]},i.getPlaceholder=function(){var e=this.head.split("/").pop()||"",t=r.singular(this.toCamelCase(e));return":"+(t?t+"Id":"id")},i.createProxy=function(e,t){var r=t,o=this.callRouter.bind(t);return new Proxy(this,{get:function(t,i){return r[i]?Reflect.get(r,i):o(e[i])}})},e}();
//# sourceMappingURL=express-route-grouping.cjs.production.min.js.map
